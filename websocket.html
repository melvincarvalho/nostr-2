<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>websocket</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <script type="module">

  import { h, html, Component, render } from './js/spux.js'

  import ReconnectingWebSocket from 'https://cdn.skypack.dev/reconnecting-websocket'

  var relay = 'wss://nostr.rocks/'
  var relay = 'wss://nostr-pub.wellorder.net/'
  
  const rws = new ReconnectingWebSocket(relay)
  var connected = false

  rws.addEventListener('open', () => {
    console.log('connected to', relay)
    connected = true
    renderAll()
  })

  function renderAll() {
    render(html`
    <h3>Testing Connection</h3>
    ${relay} <span style="color:${connected.toString()?'green':'red'}">â€¢</span>

  `, document.body)
  }

  renderAll()

  </script>
</head>
<body style="font-family: monospace; font-size: 28px;">
</body>
</html>